{
    "sourceFile": "frontend/src/components/EditDestination.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1633900804672,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1633900804672,
            "name": "Commit-0",
            "content": "import React, { Component } from 'react';\r\nimport axios from 'axios';\r\nimport '../styles/dest.css';\r\n\r\nexport default class EditDestination extends Component {\r\n\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.state={\r\n            title:\"\",\r\n            description:\"\",\r\n            description1:\"\",\r\n            url:\"\",\r\n            url1:\"\",\r\n            image1:\"\", \r\n\r\n            titleError:'',\r\n            descriptionError:'',\r\n            description1Error:'',\r\n            urlError:'',\r\n            url1Error:'',\r\n            image1Error:'' \r\n        };\r\n    }\r\n\r\n    handleInputChange = (e) =>{\r\n        const {name,value} = e.target;\r\n\r\n        this.setState({\r\n            ...this.state,\r\n            [name]:value\r\n        })\r\n\r\n    }\r\n\r\n    onSubmit = (e) =>{\r\n        e.preventDefault();\r\n        this.validation();\r\n\r\n        if(this.state.title && this.state.description && this.state.description1  && this.state.url  && this.state.url1 && this.state.image1 ){\r\n\r\n        const id = this.props.match.params.id;\r\n        const{title,description,description1,url,url1,image1} = this.state;\r\n\r\n        const data ={\r\n            title:title,\r\n            description:description,\r\n            description1:description1,\r\n            url:url,\r\n            url1:url1,\r\n            image1:image1            \r\n        }\r\n\r\n        console.log(data)\r\n\r\n        axios.put(`http://localhost:8070/destination/update/${id}`,data).then((res)=>{\r\n            if(res.data.success){\r\n                alert(\"Destination Updated successfully\")\r\n                this.setState({\r\n                    title:\"\",\r\n                    description:\"\",\r\n                    description1:\"\",\r\n                    url:\"\",\r\n                    url1:\"\",\r\n                    image1:\"\"\r\n                });\r\n                \r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    }\r\n    \r\n\r\n    componentDidMount(){\r\n        const id = this.props.match.params.id;\r\n        axios.get(`http://localhost:8070/destination/${id}`).then((res)=>{\r\n            if(res.data.success){\r\n                this.setState({\r\n                    title:res.data.destination.title,\r\n                    description:res.data.destination.description,\r\n                    description1:res.data.destination.description1,\r\n                    url:res.data.destination.url,\r\n                    url1:res.data.destination.url1,\r\n                    image1:res.data.destination.image1,\r\n                    \r\n                });\r\n\r\n                console.log(this.state.post);\r\n            }\r\n        });\r\n    }\r\n\r\n    onChangeImage1=event=>{\r\n        this.setState({\r\n            selectedFile: event.target.files[0],\r\n            loaded: 0,\r\n        }, () => {\r\n            const data = new FormData() \r\n            data.append('file', this.state.selectedFile)\r\n            axios.post(\"http://localhost:8070/destination/upload\", data, { \r\n            }).then(res => { \r\n                this.setState({image1:res.data.filename})\r\n            })\r\n        })\r\n    }\r\n\r\n\r\n    validation = () => {\r\n        let titleError=\"\";\r\n        let descriptionError= \"\";\r\n        let description1Error= \"\";\r\n        let urlError= \"\";\r\n        let url1Error= \"\";\r\n        let image1Error= \"\";\r\n        \r\n        if(!this.state.title){\r\n            titleError=\"Destination Title Required!\"\r\n        }\r\n\r\n        if(!this.state.description){\r\n            descriptionError=\"Description Required!\"\r\n        }        \r\n\r\n        if(!this.state.description1){\r\n            description1Error=\"Description Required!\"\r\n\r\n        }\r\n\r\n        if(!this.state.url){\r\n            urlError=\"URL Required!\"\r\n        }\r\n\r\n        if(!this.state.url.includes('https://')){\r\n            urlError=\"Invalid URL!\"\r\n        }\r\n\r\n        if(!this.state.url1){\r\n            url1Error=\"URL Required!\"\r\n\r\n        }\r\n\r\n        if(!this.state.url1.includes('https://')){\r\n            urlError=\"Invalid URL!\"\r\n        }\r\n\r\n        if(!this.state.image1){\r\n            image1Error=\"Image Required!\"\r\n\r\n        }\r\n        \r\n\r\n        if(titleError | descriptionError | description1Error | urlError | url1Error | image1Error  ){\r\n\r\n            this.setState({ titleError , descriptionError , description1Error , urlError , url1Error , image1Error  });\r\n\r\n            return false;\r\n        }else{\r\n            this.setState({ titleError , descriptionError , description1Error , urlError , url1Error , image1Error });\r\n\r\n        }\r\n        return true;\r\n\r\n    }\r\n    \r\n\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"col-md-8 mt-4 mx-auto\">\r\n                <h1 className=\"h3 mb-3 font-weight-normal\">Edit Destination</h1>\r\n\r\n                    <form className=\"form-group\" noValidate>\r\n                    <div className=\"form-group\" style={{marginBottom:'15px'}}>\r\n                            <label style={{marginBottom:'5px'}}>Title</label>\r\n                            <input type=\"text\"\r\n                            className=\"form-control\"\r\n                            name=\"title\"\r\n                            placeholder=\"Enter title\"\r\n                            value={this.state.title}\r\n                            onChange={this.handleInputChange} />\r\n                            <div style={{color : \"red\"}}>{this.state.titleError}</div>\r\n                        </div>\r\n\r\n                        <div className=\"form-group\" style={{marginBottom:'15px'}}>\r\n                            <label style={{marginBottom:'5px'}}>Description</label>\r\n                            <input type=\"text\"\r\n                            className=\"form-control\"\r\n                            name=\"description\"\r\n                            placeholder=\"Enter Description\"\r\n                            value={this.state.description}\r\n                            onChange={this.handleInputChange} />\r\n                            <div style={{color : \"red\"}}>{this.state.descriptionError}</div>\r\n                        </div>\r\n\r\n                        <div className=\"form-group\" style={{marginBottom:'15px'}}>\r\n                            <label style={{marginBottom:'5px'}}>Description1</label>\r\n                            <input type=\"text\"\r\n                            className=\"form-control\"\r\n                            name=\"description1\"\r\n                            placeholder=\"Enter Description1\"\r\n                            value={this.state.description1}\r\n                            onChange={this.handleInputChange} />\r\n                            <div style={{color : \"red\"}}>{this.state.description1Error}</div>\r\n                        </div>\r\n\r\n                        <div className=\"form-group\" style={{marginBottom:'15px'}}>\r\n                            <label style={{marginBottom:'5px'}}>Destination URL</label>\r\n                            <input type=\"text\"\r\n                            className=\"form-control\"\r\n                            name=\"url\"\r\n                            placeholder=\"Enter URL\"\r\n                            value={this.state.url}\r\n                            onChange={this.handleInputChange} />\r\n                            <div style={{color : \"red\"}}>{this.state.urlError}</div>\r\n                        </div>\r\n\r\n                        <div className=\"form-group\" style={{marginBottom:'15px'}}>\r\n                            <label style={{marginBottom:'5px'}}>Video URL</label>\r\n                            <input type=\"text\"\r\n                            className=\"form-control\"\r\n                            name=\"url1\"\r\n                            placeholder=\"Enter URL\"\r\n                            value={this.state.url1}\r\n                            onChange={this.handleInputChange} />\r\n                            <div style={{color : \"red\"}}>{this.state.url1Error}</div>\r\n                        </div>\r\n\r\n                        <div className=\"form-group\" style={{marginBottom:'15px'}}>\r\n                                <label style={{marginBottom:'5px'}}>Image</label>\r\n                                <input type=\"file\"\r\n                                className=\"form-control\"\r\n                                name=\"image1\"                                \r\n                                onChange={this.onChangeImage1} />\r\n                                <div style={{color : \"red\"}}>{this.state.image1Error}</div>\r\n                            </div>\r\n                        \r\n\r\n                        <button className=\"btn btn-success\" type=\"submit\" style={{marginTop:'15px'}} onClick={this.onSubmit}>\r\n                            <i className=\"fa fa-pencil-square-o\"></i>\r\n                            &nbsp; Update Destination Details\r\n                        </button>\r\n\r\n                    </form>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n"
        }
    ]
}